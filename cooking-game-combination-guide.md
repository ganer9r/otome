# 🎯 요리 게임 조합 시스템 설계 가이드

## 📊 전체 구조

### 등급별 개수 (총 497개)

```
G급:  40개 (8%)   ✅ 확정 (기본 재료) + 설탕 1개 추가
F급:  90개 (18%)  🔄 진행중 (24개 완료)
E급: 110개 (22%)  🔄 진행중 (25개 완료)
D급:  70개 (14%)  🔄 진행중 (47개 완료)
C급:  55개 (11%)  🔄 진행중 (33개 완료)
B급:  40개 (8%)   🔄 진행중 (34개 완료)
A급:  35개 (7%)   🔄 진행중 (32개 완료)
R급:  30개 (6%)   ✅ 완료 (30개: 한식 5 + 양식 5 + 중식 5 + 일식 5 + 퓨전 5 + 디저트 5)
SR급: 12개 (2%)   ⬜ 조합 설계 필요 (선택)
SSR급: 5개 (1%)   ⬜ 최종 확정 필요 (선택)
```

### 카테고리별 진행 상황

| 카테고리 | R급 상태 | 비고 |
|----------|----------|------|
| 한식 | ✅ 완료 (5/5) | 신선로, 구절판, 장흥삼합, 삼계해물탕, 어복쟁반 |
| 양식 | ✅ 완료 (5/5) | 비프 웰링턴, 트러플 카르보나라, 코키유 생 자크, 부야베스, 부르기뇽 |
| 중식 | ✅ 완료 (5/5) | 북경 오리구이, 동파육, 불도장, 청초해분, 좌종당계 |
| 일식 | ✅ 완료 (5/5) | 오토로 초밥, 마츠바가니, 스키야키, 참치 삼중주, 해물오마카세 |
| 퓨전 | ✅ 완료 (5/5) | 전복 리소토, 싱가포르 칠리 크랩, 랍스터 테르미도르, 대게 테르미도르, 푸아그라 |
| 디저트 | ✅ 완료 (5/5) | 오페라 케이크, 크로캅부슈, 밀푀유, 베이크드 알래스카, 초콜릿 퐁듀 |

---

## 🎯 핵심 설계 원칙

### 1. Top-down 방식 (R → G)

**왜 R에서 G로?**
- ✅ 목표 명확 (R급 30개 이미 확정)
- ✅ 필요한 중간 요리만 생성 (효율적)
- ✅ 조합 경로 보장 (G급까지 도달 확실)
- ❌ G → R은 조합 폭발, 경로 불명확

**작업 흐름**:
```
R급 30개 (확정)
 ↑ 역추적
A급 35개 (R급이 필요로 하는 재료)
 ↑ 역추적
B급 40개
 ↑ 역추적
...
 ↑ 역추적
F급 120개 (최종 역산)
 ↑ 조합
G급 40개 (기본 재료)
```

---

### 2. 네이밍 규칙

#### ❌ 금지
- "특제", "상급", "좋은", "최고급" 등 **수식어 금지**
- 가상의 중간 재료 (특제 숙성 장, 비밀 소스 등) **금지**
- 같은 요리에 수식어만 붙이기 **금지**

#### ✅ 허용
- **F급, E급**: 가공 재료 (간장, 반죽, 소스, 육수 등)
- **D급 이상**: 실제 존재하는 요리만

#### 올바른 패턴 예시
```
G급: 콩 + 콩 = F급: 간장
F급: 간장 + 마늘 = E급: 간장양념
E급: 소고기 + 간장양념 = D급: 불고기 (실제 요리)
```

---

### 3. 범용 중간 재료 설계

**중간 재료는 여러 요리에 재사용**되어야 함

#### 예시: 토마토 소스
```
토마토 소스 (F급)
├─ 피자 (E급)
├─ 파스타 (E급)
├─ 리조또 (D급)
├─ 라자냐 (C급)
└─ 부야베스 (R급)
```

#### 예시: 송로버섯
```
송로버섯 (F급) = 버섯 + 버섯
├─ 트러플 카르보나라 (R급)
├─ 비프 웰링턴 (R급)
└─ 트러플 리조또 (A급)
```

#### 예시: 양념장
```
양념장 (E급)
├─ 불고기 (C급)
├─ 찜닭 (B급)
├─ 간장게장 (R급)
└─ 갈비찜 (A급)
```

**범용 재료 리스트** (추후 작성 필요):
- F급: 간장, 토마토소스, 반죽, 육수, 소금, 설탕 등
- E급: 양념장, 크림소스, 면, 밥 등
- D급: 특제 소스, 숙성 재료 등

---

## 🔧 조합 시스템 규칙

### 기본 조합 규칙
1. **재료 + 재료 = 요리 (이면서 재료)**
2. **최대 2개까지만 조합**
3. **완성 요리 = 다음 조합의 재료로 재사용 가능**
4. **등급은 자동 상승** (조합 깊이에 따라)

### 조합 예시
```
G급: 토마토, 양파
  ↓
F급: 토마토 + 양파 = 토마토 소스
  ↓
F급: 밀 + 물 = 반죽
  ↓
E급: 반죽 + 토마토소스 = 피자 도우
  ↓
E급: 우유 + 치즈 = 모차렐라
  ↓
D급: 피자 도우 + 모차렐라 = 마르게리타 피자
```

### 조리도구 (선택적 사용)
- **냄비**: 끓이기, 찌기
- **후라이팬**: 볶기, 튀기기
- **오븐**: 굽기

*조리도구는 필수가 아니며, 재료 조합만으로도 요리 생성 가능*

---

## 📝 작업 순서

### Phase 1: R급 역추적 (A급 도출)
1. R급 30개 각각 분석
2. "이 요리 만들려면 무엇이 필요한가?"
3. A급 재료 35개 도출

**예시**:
```
R급: 비프 웰링턴
  → 필요: 소고기 스테이크(A급) + 송로버섯 파이(A급)

R급: 트러플 카르보나라
  → 필요: 카르보나라 베이스(A급) + 송로버섯(F급)
```

### Phase 2: A급 역추적 (B급 도출)
1. A급 35개 각각 분석
2. B급 재료 40개 도출

### Phase 3: B급 → C급 → D급 → E급 → F급
1. 각 등급별 역추적
2. 범용 재료 우선 설계
3. 재사용 가능성 최대화

### Phase 4: 검증
1. 모든 R급이 G급까지 연결되는지 확인
2. 등급별 개수 맞는지 확인
3. 중복 이름 없는지 확인

---

## 🎨 등급별 특징 (가이드라인)

### F급 (90개) - 가공 재료
- **조합**: G + G (쉬움)
- **특징**: 단순 가공 재료, 조합 명확
- **예시**: 간장, 반죽, 토마토소스, 육수, 버터, 크림
- **실제 요리 아님** ⚠️

### E급 (110개) - 가공 재료/기본 조합
- **조합**: F + F, F + G (쉬움)
- **특징**: 2차 가공 재료, 소스류, 면류
- **예시**: 양념장, 크림소스, 파스타면, 지단
- **실제 요리 아님** ⚠️

### D급 (70개) - 실제 요리 시작
- **조합**: G/F/E + G/F/E
- **특징**: 기본 요리, 집밥/분식급
- **예시**: 불고기, 스테이크, 토마토파스타, 오믈렛
- **실제 요리** ✅

### C급 (55개) - 실제 요리
- **조합**: D + D, D + C
- **특징**: 중급 요리, 일반 레스토랑급
- **예시**: 카르보나라, 돈까스, 삼계탕, 해물찜
- **실제 요리** ✅

### B급 (40개) - 실제 요리
- **조합**: C + C, C + B
- **특징**: 고급 요리, 고급 레스토랑급
- **예시**: 궁중전골, 미트파이, 티본스테이크
- **실제 요리** ✅

### A급 (35개) - 실제 요리
- **조합**: B + B, B + A
- **특징**: 최고급 요리, R급 직전 단계
- **예시**: 웰링턴스테이크, 트러플리조또, 한정식
- **실제 요리** ✅

### R급 (30개) - 전설의 요리 ✅
- **조합**: A + A
- **특징**: 전설의 요리, 미슐랭급
- **예시**: 비프 웰링턴, 부야베스, 신선로
- **실제 요리** ✅

---

## 🚫 피해야 할 것

### 네이밍
- ❌ 수식어: "좋은", "상급", "최고급", "특제" 붙이기
- ❌ 같은 요리 반복: 간장게장 → 좋은 간장게장
- ❌ 가상 재료: "특제 숙성 장", "비밀 소스" 등
- ❌ 불명확한 이름: "요리", "음식", "국물"

### 등급 규칙
- ❌ F~E급에 실제 요리 넣기 (가공 재료만)
- ❌ D급 이상에 가상 재료 넣기 (실제 요리만)

### 조합 설계
- ❌ 막다른 골목: 한 요리에만 쓰이는 중간 재료 (비효율)
- ❌ 불필요한 중간 단계: 지나치게 복잡한 조합 트리
- ❌ 논리적 오류: "피자 + 피자 = 더 큰 피자" (의미 없음)

### 작업 방식
- ❌ Bottom-up (G → R): 조합 폭발, 비효율
- ❌ 등급별 개수 먼저 채우기: 불필요한 요리 양산

---

## 📚 레퍼런스

### 기존 문서
- `cooking-game-legendary-dishes.md`: R급 30개 상세 정보
- `cooking-game-design.md`: 전체 게임 디자인
- `cooking-game-image-guide.md`: 비주얼 가이드

### 데이터베이스
- `ingredients` 테이블: G급 40개 기본 재료
- `recipes` 테이블: 조합 데이터

---

## 💡 핵심 요약

1. **Top-down 방식** (R → G 역추적)
2. **유니크 네이밍** (수식어 중복 금지)
3. **범용 중간 재료** (재사용 최대화)
4. **2개 조합** (단순하게)
5. **완성 요리 = 재료** (재귀적 시스템)

---

## 📅 업데이트 로그

- 2025-01-24: 초안 작성
  - 전체 구조 정의 (497개)
  - 핵심 설계 원칙 3가지
  - Top-down 방식 확정
  - 작업 순서 정의
- 2025-01-27: R급 30개 조합 트리 완료
  - 한식/양식/중식/일식/퓨전/디저트 각 5개씩 완료
  - 총 232개 레시피 완료 (F:24, E:25, D:47, C:33, B:34, A:32, R:30)
  - G급에 설탕 추가 (디저트용)
  - 퓨전에서 파에야 → 랍스터 테르미도르로 변경
