<script lang="ts">
	interface Props {
		taxAmount: number;
		capitalAfterTax: number;
		onConfirm: () => void;
	}

	let { taxAmount, capitalAfterTax, onConfirm }: Props = $props();
</script>

<div class="tax-modal">
	<div class="modal-content">
		<div class="icon">ğŸ›ï¸</div>
		<h2 class="title">ì„¸ê¸ˆ ì§•ìˆ˜</h2>
		<p class="description">êµ­ì„¸ì²­ì—ì„œ ì„¸ê¸ˆì„ ì§•ìˆ˜í•©ë‹ˆë‹¤</p>

		<div class="tax-info">
			<div class="tax-row">
				<span class="label">ì§•ìˆ˜ ì„¸ê¸ˆ</span>
				<span class="value tax">-{taxAmount.toLocaleString()}ì›</span>
			</div>
			<div class="divider"></div>
			<div class="tax-row">
				<span class="label">ì”ì•¡</span>
				<span class="value" class:negative={capitalAfterTax < 0}>
					{capitalAfterTax.toLocaleString()}ì›
				</span>
			</div>
		</div>

		<button type="button" class="confirm-btn" onclick={onConfirm}>í™•ì¸</button>
	</div>
</div>

<style lang="postcss">
	@reference '$styles/app.css';

	.tax-modal {
		@apply fixed inset-0 z-50;
		@apply flex items-center justify-center;
		background: rgba(0, 0, 0, 0.6);
	}

	.modal-content {
		@apply flex flex-col items-center;
		@apply rounded-3xl;
		@apply p-6;
		@apply mx-4;
		@apply w-full max-w-sm;
		background: linear-gradient(to bottom, #fffde7, #fff8e1);
		border: 4px solid #e8d4a8;
		box-shadow:
			0 8px 32px rgba(0, 0, 0, 0.25),
			inset 0 2px 0 rgba(255, 255, 255, 0.8);
		animation: modalPop 0.3s ease-out;
	}

	@keyframes modalPop {
		0% {
			transform: scale(0.8);
			opacity: 0;
		}
		100% {
			transform: scale(1);
			opacity: 1;
		}
	}

	.icon {
		font-size: 48px;
		@apply mb-2;
	}

	.title {
		@apply text-xl font-bold;
		color: #5d4037;
		@apply mb-1;
	}

	.description {
		@apply text-sm font-medium;
		color: #8d6e63;
		@apply mb-4;
	}

	.tax-info {
		@apply w-full;
		@apply rounded-2xl;
		@apply p-4;
		@apply mb-4;
		background: rgba(255, 255, 255, 0.8);
		border: 3px solid #e8d4a8;
	}

	.tax-row {
		@apply flex items-center justify-between;
		@apply py-1;
	}

	.label {
		@apply font-bold;
		color: #8d6e63;
	}

	.value {
		@apply font-bold;
		color: #5d4037;
	}

	.value.tax {
		color: #d32f2f;
	}

	.value.negative {
		color: #d32f2f;
	}

	.divider {
		border-top: 2px solid #e8d4a8;
		@apply my-2;
	}

	.confirm-btn {
		@apply w-full;
		@apply px-6 py-3;
		@apply rounded-xl;
		@apply font-bold;
		@apply transition-all;
		background: linear-gradient(to bottom, #64b5f6, #2196f3);
		color: white;
		border: 3px solid #1976d2;
		box-shadow: 0 4px 0 #1565c0;
	}

	.confirm-btn:hover {
		filter: brightness(1.05);
	}

	.confirm-btn:active {
		box-shadow: 0 2px 0 #1565c0;
		transform: translateY(2px) scale(0.95);
	}
</style>
